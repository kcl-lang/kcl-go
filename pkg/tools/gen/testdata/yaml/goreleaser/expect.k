"""
This file was generated by the KCL auto-gen tool. DO NOT EDIT.
Editing this file might prove futile when you re-run the KCL auto-gen generate command.
"""

{
    before = {
        hooks = [
            "go mod tidy"
        ]
    }
    builds = [
        {
            env = [
                "CGO_ENABLED=0"
            ]
            goos = [
                "linux"
                "darwin"
            ]
            goarch = [
                "amd64"
                "arm64"
            ]
            ldflags = [
                "-s -w"
            ]
            main = "."
            id = "manager"
            binary = "manager"
        }
    ]
    archives = [
        {
            id = "release"
            name_template = "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
            builds_info = {
                mode = 420
                mtime = "2008-01-02T15:04:05Z"
            }
            files = [
                "LICENSE"
                "README.md"
                "docs/*"
                {
                    src = "dist/CHANGELOG.md"
                    strip_parent = True
                }
            ]
        }
    ]
    checksum = {
        name_template = "checksums.txt"
    }
    snapshot = {
        name_template = "{{ .Tag }}-next"
    }
    changelog = {
        sort = "desc"
        use = "github"
        groups = [
            {
                title = "Features"
                regexp = r"""^.*?feat(\([[:word:]]+\))??!?:.+$"""
                order = 0
            }
            {
                title = "Bug fixes"
                regexp = r"""^.*?fix(\([[:word:]]+\))??!?:.+$"""
                order = 1
            }
            {
                title = "Performance improvements"
                regexp = r"""^.*?perf(\([[:word:]]+\))??!?:.+$"""
                order = 2
            }
            {
                title = "Refactors"
                regexp = r"""^.*?refactor(\([[:word:]]+\))??!?:.+$"""
                order = 3
            }
            {
                title = "Tests"
                regexp = r"""^.*?test(\([[:word:]]+\))??!?:.+$"""
                order = 4
            }
            {
                title = "Documents"
                regexp = r"""^.*?docs(\([[:word:]]+\))??!?:.+$"""
                order = 5
            }
            {
                title = "Chores"
                regexp = r"""^.*?chore(\([[:word:]]+\))??!?:.+$"""
                order = 6
            }
            {
                title = "CI"
                regexp = r"""^.*?ci(\([[:word:]]+\))??!?:.+$"""
                order = 7
            }
            {
                title = "Others"
                order = 999
            }
        ]
        filters = {
            exclude = [
                "^style:"
            ]
        }
    }
    release = {
        draft = False
        footer = r"""## Docker Images
* `kusionstack/{{ .ProjectName }}:{{ .Tag }}`
"""
    }
    dockers = [
        {
            image_templates = [
                "kusionstack/{{ .ProjectName }}:{{ .Tag }}-amd64"
            ]
            dockerfile = "releaser.Dockerfile"
            goos = "linux"
            goarch = "amd64"
            use = "docker"
            build_flag_templates = [
                "--pull"
                "--label=org.opencontainers.image.created={{.Date}}"
                "--label=org.opencontainers.image.name={{.ProjectName}}"
                "--label=org.opencontainers.image.revision={{.FullCommit}}"
                "--label=org.opencontainers.image.version={{.Version}}"
                "--label=org.opencontainers.image.source={{.GitURL}}"
                "--platform=linux/amd64"
            ]
        }
        {
            image_templates = [
                "kusionstack/{{ .ProjectName }}:{{ .Tag }}-arm64"
            ]
            dockerfile = "releaser.Dockerfile"
            goos = "linux"
            goarch = "arm64"
            use = "docker"
            build_flag_templates = [
                "--pull"
                "--label=org.opencontainers.image.created={{.Date}}"
                "--label=org.opencontainers.image.name={{.ProjectName}}"
                "--label=org.opencontainers.image.revision={{.FullCommit}}"
                "--label=org.opencontainers.image.version={{.Version}}"
                "--label=org.opencontainers.image.source={{.GitURL}}"
                "--platform=linux/arm64"
            ]
        }
    ]
    docker_manifests = [
        {
            name_template = "kusionstack/{{ .ProjectName }}:{{ .Tag }}"
            image_templates = [
                "kusionstack/{{ .ProjectName }}:{{ .Tag }}-amd64"
                "kusionstack/{{ .ProjectName }}:{{ .Tag }}-arm64"
            ]
        }
        {
            name_template = "kusionstack/{{ .ProjectName }}:latest"
            image_templates = [
                "kusionstack/{{ .ProjectName }}:{{ .Tag }}-amd64"
                "kusionstack/{{ .ProjectName }}:{{ .Tag }}-arm64"
            ]
        }
    ]
}
